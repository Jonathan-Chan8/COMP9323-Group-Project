{% extends "client_base.html" %}
{% block title %}Connect Requests{% endblock %}
{% block firstname %}{{user.firstName}}{% endblock %}
{% block lastname %}{{user.lastName}}{% endblock %}
{% block accounttype %}{{user.accountType}}{% endblock %}
{% block header %}
<h3 style="padding: 15px 0;font-weight: bold;">Connect Requests</h3>
{% endblock %}
{% block content %}
<link rel="stylesheet" href="/static/scss/report.css"> 
    
    <div>
        <button onclick="location.href='http://localhost:5000/client_connect'" type="button">
         Connect</button>
        <button onclick="location.href='http://localhost:5000/client_connect_requests'" type="button">
         Requests</button>
    </div>
    
    
    <script>

        function sendJSON(data, response) {
            var data = {
                response: response,
                sender_id: data
            };
        
            var json = JSON.stringify(data);
        
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/accept_request");
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(json);
        }
                
    </script>

    <form action="" method="post">

        <p>
            {% for key in requests.keys() %}
                
                <p>{{requests[key] }}</p>
                
                <a href="/client_view_profile/{{ key }}"><button type='button'>View profile</button></a>
                <button id='btn1' type="button" onclick="sendJSON( {{ key }} , 'accept')">Accept</button> 
                <button id='btn1' type="button" onclick="sendJSON( {{ key }} , 'decline')">Decline</button> 

            {% endfor %}
        </p>
      
    </form>
{% endblock %}







