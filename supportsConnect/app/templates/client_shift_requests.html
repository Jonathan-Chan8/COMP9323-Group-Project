{% extends "client_base.html" %}
{% block title %}View Shift Requests{% endblock %}
{% block firstname %}{{user.firstName}}{% endblock %}
{% block lastname %}{{user.lastName}}{% endblock %}
{% block accounttype %}{{user.accountType}}{% endblock %}
{% block header %}
<h3 style="padding: 15px 0;font-weight: bold;">View Shift Requests</h3>
{% endblock %}
{% block content %}
<link rel="stylesheet" href="/static/scss/report.css"> 

    <div>
        <button onclick="location.href='http://localhost:5000/client_shift_requests'" type="button">
         Requests</button>
        <button onclick="location.href='http://localhost:5000/client_shift_scheduled'" type="button">
         Scheduled</button>
          <button onclick="location.href='http://localhost:5000/client_shift_completed'" type="button">
         Completed</button>
    </div>

    <script>

        function sendJSON(data, response) {
            var data = {
                response: response,
                shift_id: data
            };
        
            var json = JSON.stringify(data);
        
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/accept_shift_request");
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(json);
            setTimeout(location.reload.bind(location), 100);
            
        }
                
    </script>

    <form action="" method="post">

        <p>
            {% for shift in shifts %}
            
                <big><b> {{ shift.client_name }} </b></big><br>
        
                <a> {{ shift.date }} <br><br>
        
                <b> Start Time: </b> <a> {{ shift.start_time }} </a><br>
        
                <b> End Time: </b> <a> {{ shift.end_time }} </a><br>
                
        
                <button id='btn1' type="button" onclick="sendJSON( {{ shift.shift_id }} , 'accept')">Accept</button> 
                <button id='btn1' type="button" onclick="sendJSON( {{ shift.shift_id }} , 'decline')">Decline</button> 
                
                <br><br><br>
            {% endfor %}
        </p>
    </form>


    
    
{% endblock %}

